# MicroLearn AI - 빌드 가이드

## 개요

이 가이드는 MicroLearn AI를 시연용 Portable 패키지로 빌드하는 방법을 설명합니다.

## 빌드 환경 요구사항

- Node.js 및 npm (프론트엔드 빌드용)
- Python 3.8+ (백엔드)
- Git (버전 관리)

## 빌드 단계

### 1단계: 프론트엔드 빌드

```bash
cd frontend
npm install  # 의존성이 설치되지 않았다면
npm run build
```

빌드가 완료되면 `frontend/build/` 폴더가 생성됩니다.

### 2단계: 프론트엔드 빌드 파일을 Release 폴더로 복사

**Windows:**
```cmd
xcopy /E /I /Y frontend\build Release\frontend\build
```

**Mac/Linux:**
```bash
cp -r frontend/build Release/frontend/build
```

### 3단계: .env 파일 확인

`Release/backend/.env` 파일이 올바르게 설정되어 있는지 확인합니다:

```env
GEMINI_API_KEY=your_actual_api_key_here
SECRET_KEY=your_secret_key_here
```

### 4단계: Release 폴더 구조 확인

빌드가 완료되면 다음과 같은 구조가 되어야 합니다:

```
Release/
├── backend/
│   ├── auth.py
│   ├── crud.py
│   ├── database.py
│   ├── main.py
│   ├── models.py
│   ├── rag_handler.py
│   ├── schemas.py
│   ├── seed.py
│   ├── tts_handler.py
│   ├── check_user.py
│   ├── requirements.txt
│   ├── .env
│   ├── sql_app.db
│   └── static/
├── frontend/
│   └── build/
│       ├── index.html
│       ├── assets/
│       └── ...
├── setup.bat              # 초기 설정 스크립트
├── MicroLearn.bat         # 실행 스크립트
└── 시연가이드.txt          # 사용 가이드
```

### 5단계: USB에 복사

`Release` 폴더 전체를 USB 또는 외장하드에 복사합니다.

## 강의장 PC에서 실행

### 처음 실행 시

1. USB의 `Release` 폴더를 엽니다.
2. `setup.bat`을 더블클릭하여 실행
   - Python 가상환경 생성
   - 필요한 패키지 설치 (3-5분 소요)

### 매번 실행 시

1. `MicroLearn.bat`을 더블클릭
2. 자동으로 서버가 시작되고 브라우저가 열립니다.
3. `http://localhost:8000`으로 접속됩니다.

## 주의사항

### 포트 충돌 문제

7회차 보고서에서 언급된 8000번 포트 사용 불가 문제가 발생할 경우:

1. `MicroLearn.bat` 파일을 메모장으로 엽니다.
2. 마지막 줄을 다음과 같이 수정:
   ```bat
   python -m uvicorn main:app --host 0.0.0.0 --port 8001
   ```
3. 브라우저에서 `http://localhost:8001`로 접속합니다.

### 프론트엔드 API 엔드포인트

프론트엔드가 백엔드 API를 호출할 때 올바른 URL을 사용하는지 확인하세요:
- 개발 모드: `http://localhost:8000/api/*`
- 프로덕션 모드: 상대 경로 `/api/*` (백엔드가 프론트엔드를 서빙하므로)

## 백엔드 수정 사항

이번 빌드에서 `backend/main.py`가 다음과 같이 수정되었습니다:

1. **프론트엔드 정적 파일 서빙 추가**
   - `/assets` 경로에 프론트엔드 빌드 파일 마운트
   - 루트 경로(`/`)에서 `index.html` 서빙
   - SPA fallback 처리 추가

2. **CORS 설정 업데이트**
   - `http://localhost:8000` 추가 (프로덕션 모드)

## 문제 해결

자세한 문제 해결 방법은 `Release/시연가이드.txt` 파일의 "5. 문제 해결" 섹션을 참조하세요.

## 시연 시나리오

10분 발표를 위한 시연 시나리오는 `Release/시연가이드.txt` 파일의 "4. 시연 시나리오" 섹션을 참조하세요.
