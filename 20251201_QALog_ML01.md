# MicroLearn AI - QA ë¡œê·¸ (2025ë…„ 12ì›” 1ì¼)

## í…ŒìŠ¤íŠ¸ í™˜ê²½
- **ë‚ ì§œ**: 2025-12-01
- **ëª©ì **: Release í´ë” ë¹Œë“œ ë° ì‹œì—°ìš© ë°ëª¨ í…ŒìŠ¤íŠ¸
- **ì„œë²„**: Uvicorn (localhost:8000)
- **ë¡œê·¸ì¸**: admin@microlearn.com / admin1234

---

## ë°œìƒí•œ ì˜¤ë¥˜ ë° í•´ê²° ë‚´ì—­

### 1. Batch íŒŒì¼ ì¸ì½”ë”© ì˜¤ë¥˜
**ìƒíƒœ**: âœ… í•´ê²°ì™„ë£Œ

**ì¦ìƒ**:
```
'backend'ì€(ëŠ”) ë‚´ë¶€ ë˜ëŠ” ì™¸ë¶€ ëª…ë ¹, ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í”„ë¡œê·¸ë¨, ë˜ëŠ” ë°°ì¹˜ íŒŒì¼ì´ ì•„ë‹™ë‹ˆë‹¤.
```

**ì›ì¸**:
- setup.batê³¼ MicroLearn.bat íŒŒì¼ì— í•œê¸€ ì£¼ì„ì´ í¬í•¨ë˜ì–´ ì¸ì½”ë”© ë¬¸ì œ ë°œìƒ
- Windows ê¸°ë³¸ ì½”ë“œí˜ì´ì§€ì—ì„œ í•œê¸€ í•´ì„ ì˜¤ë¥˜

**í•´ê²°**:
- ë°°ì¹˜ íŒŒì¼ ì²« ì¤„ì— `chcp 65001 > nul` ì¶”ê°€ (UTF-8 ì¸ì½”ë”© ì„¤ì •)
- ëª¨ë“  ë©”ì‹œì§€ë¥¼ ì˜ì–´ë¡œ ë³€ê²½

**íŒŒì¼**: `Release/setup.bat`, `Release/MicroLearn.bat`

---

### 2. FastAPI ëª¨ë“ˆ ì—†ìŒ
**ìƒíƒœ**: âœ… í•´ê²°ì™„ë£Œ

**ì¦ìƒ**:
```
ModuleNotFoundError: No module named 'fastapi'
```

**ì›ì¸**:
- setup.bat ì‹¤í–‰ ì¤‘ë‹¨ ë˜ëŠ” íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë¯¸ì™„ë£Œ

**í•´ê²°**:
- setup.bat ì¬ì‹¤í–‰í•˜ì—¬ ëª¨ë“  ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ì„¤ì¹˜ ì™„ë£Œ

---

### 3. lxml_html_clean íŒ¨í‚¤ì§€ ëˆ„ë½
**ìƒíƒœ**: âœ… í•´ê²°ì™„ë£Œ

**ì¦ìƒ**:
```
ImportError: lxml.html.clean module is now a separate project lxml_html_clean
```

**ì›ì¸**:
- lxml 6.0.2 ë²„ì „ë¶€í„° html.clean ëª¨ë“ˆì´ ë³„ë„ íŒ¨í‚¤ì§€ë¡œ ë¶„ë¦¬ë¨

**í•´ê²°**:
- requirements.txtì— `lxml_html_clean` ì¶”ê°€
- pip install ì¬ì‹¤í–‰

**íŒŒì¼**: `Release/backend/requirements.txt` (line 27)

---

### 4. ëª¨ë“ˆ Import ê²½ë¡œ ì˜¤ë¥˜
**ìƒíƒœ**: âœ… í•´ê²°ì™„ë£Œ

**ì¦ìƒ**:
```
ModuleNotFoundError: No module named 'backend'
ImportError: attempted relative import with no known parent package
```

**ì›ì¸**:
- Release/backend í´ë”ê°€ Python íŒ¨í‚¤ì§€ë¡œ ì¸ì‹ë˜ì§€ ì•ŠìŒ
- backend/ ë””ë ‰í† ë¦¬ì—ì„œ ì‹¤í–‰í•˜ì—¬ ìƒëŒ€ ê²½ë¡œ import ì‹¤íŒ¨

**í•´ê²°**:
1. `Release/backend/__init__.py` íŒŒì¼ ìƒì„±
2. ì‹¤í–‰ ë””ë ‰í† ë¦¬ë¥¼ Release/ë¡œ ë³€ê²½
3. ì‹¤í–‰ ëª…ë ¹ì–´ ìˆ˜ì •: `python -m uvicorn backend.main:app`

**íŒŒì¼**: `Release/backend/__init__.py` (ìƒˆë¡œ ìƒì„±)

---

### 5. SECRET_KEY í™˜ê²½ë³€ìˆ˜ ë¡œë“œ ì‹¤íŒ¨
**ìƒíƒœ**: âœ… í•´ê²°ì™„ë£Œ

**ì¦ìƒ**:
```
ValueError: No SECRET_KEY set for JWT
```

**ì›ì¸**:
- auth.pyê°€ main.pyë³´ë‹¤ ë¨¼ì € ì„í¬íŠ¸ë˜ì–´ .env íŒŒì¼ì´ ë¡œë“œë˜ê¸° ì „ì— SECRET_KEYë¥¼ ì½ìœ¼ë ¤ ì‹œë„

**í•´ê²°**:
- auth.py ìƒë‹¨ì— `load_dotenv()` ì¶”ê°€í•˜ì—¬ í™˜ê²½ë³€ìˆ˜ ì¡°ê¸° ë¡œë“œ

**íŒŒì¼**: `Release/backend/auth.py` (lines 4, 16)

---

### 6. Static íŒŒì¼ ê²½ë¡œ ì¶©ëŒ
**ìƒíƒœ**: âœ… í•´ê²°ì™„ë£Œ

**ì¦ìƒ**:
```
RuntimeError: Directory 'C:\...\Release\frontend\build\assets' does not exist
```

**ì›ì¸**:
- React ë¹Œë“œëŠ” /static/ ê²½ë¡œ ì‚¬ìš©
- Backendë„ /static/ ê²½ë¡œ ì‚¬ìš© (TTS ì˜¤ë””ì˜¤ íŒŒì¼)
- ë‘ ê²½ë¡œê°€ ì¶©ëŒ

**í•´ê²°**:
- Frontend staticì„ `/static`ì— ë¨¼ì € ë§ˆìš´íŠ¸ (ìš°ì„ ìˆœìœ„)
- Backend staticì„ `/api-static`ì— ë§ˆìš´íŠ¸

**íŒŒì¼**: `Release/backend/main.py` (lines 50-58)

---

### 7. Admin ê³„ì • ë¯¸ì¡´ì¬
**ìƒíƒœ**: âœ… í•´ê²°ì™„ë£Œ

**ì¦ìƒ**:
```
401 Unauthorized (ë¡œê·¸ì¸ ì‹¤íŒ¨)
```

**ì›ì¸**:
- ë°ì´í„°ë² ì´ìŠ¤ì— admin ê³„ì •ì´ ìƒì„±ë˜ì§€ ì•ŠìŒ

**í•´ê²°**:
- seed.py ì‹¤í–‰í•˜ì—¬ admin ê³„ì • ìƒì„±
- ê³„ì •: admin@microlearn.com / admin1234

---

### 8. Method Not Allowed (405) - Legacy API
**ìƒíƒœ**: âœ… í•´ê²°ì™„ë£Œ

**ì¦ìƒ**:
```
POST /api/generate-materials HTTP/1.1 405 Method Not Allowed
```

**ì›ì¸**:
- Frontendê°€ `/api/generate-materials` ì—”ë“œí¬ì¸íŠ¸ í˜¸ì¶œ
- BackendëŠ” ë¦¬íŒ©í† ë§ë˜ì–´ í•´ë‹¹ ì—”ë“œí¬ì¸íŠ¸ ì—†ìŒ

**í•´ê²°**:
- Legacy í˜¸í™˜ì„± ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
- ìë™ìœ¼ë¡œ ì„ì‹œ ë…¸íŠ¸ë¥¼ ìƒì„±í•˜ê³  ìë£Œ ìƒì„± ìˆ˜í–‰

**íŒŒì¼**: `Release/backend/main.py` (lines 454-470)

---

### 9. Gemini ëª¨ë¸ 404 ì˜¤ë¥˜ (ë°˜ë³µ)
**ìƒíƒœ**: âœ… í•´ê²°ì™„ë£Œ

**ì¦ìƒ**:
```
404 models/gemini-1.5-flash is not found for API version v1beta
404 models/gemini-1.5-flash-latest is not found
404 models/gemini-pro is not found
```

**ì‹œë„í•œ ëª¨ë¸ë“¤**:
1. gemini-1.5-flash (ì‹¤íŒ¨)
2. gemini-1.5-flash-latest (ì‹¤íŒ¨)
3. gemini-pro (ì‹¤íŒ¨)

**ì›ì¸**:
- Googleì´ Gemini 1.x ëª¨ë¸ë“¤ì„ deprecated ì²˜ë¦¬
- Gemini 2.x ëª¨ë¸ë§Œ ì‚¬ìš© ê°€ëŠ¥

**í•´ê²°**:
- `genai.list_models()` ì‹¤í–‰í•˜ì—¬ ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë¸ í™•ì¸
- `gemini-2.5-flash` ëª¨ë¸ë¡œ ë³€ê²½

**íŒŒì¼**: `Release/backend/main.py` (line 251)

---

### 10. ResponseValidationError - Quiz Options
**ìƒíƒœ**: âœ… í•´ê²°ì™„ë£Œ

**ì¦ìƒ**:
```
ResponseValidationError: 2 validation errors:
{'type': 'list_type', 'loc': ('response', 'quiz_items', 0, 'options'),
 'msg': 'Input should be a valid list', 'input': '["option1", "option2"]'}
```

**ì›ì¸**:
- Gemini 2.5-flashê°€ quiz optionsë¥¼ JSON ë¬¸ìì—´ë¡œ ë°˜í™˜
- ì˜ˆ: `'["option1", "option2"]'` (ë¬¸ìì—´) vs `["option1", "option2"]` (ë¦¬ìŠ¤íŠ¸)
- ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ ì‹œ `json.dumps()`ë¡œ ë¬¸ìì—´ ë³€í™˜
- ë¶ˆëŸ¬ì˜¬ ë•Œ ë‹¤ì‹œ íŒŒì‹±í•˜ì§€ ì•ŠìŒ

**í•´ê²° ì‹œë„**:
1. âŒ main.pyì—ì„œ `quiz_items` íŒŒì‹± ì¶”ê°€ (í•„ë“œëª… ì˜¤ë¥˜)
2. âŒ main.pyì—ì„œ `quiz` íŒŒì‹± ì¶”ê°€ (AI ìƒì„± ì‹œì ë§Œ í•´ê²°, DB ë¡œë“œ ë¬¸ì œ ë¯¸í•´ê²°)
3. âœ… schemas.pyì˜ `QuizItem` í´ë˜ìŠ¤ì— `field_validator` ì¶”ê°€

**ìµœì¢… í•´ê²°**:
```python
@field_validator('options', mode='before')
@classmethod
def parse_options(cls, v):
    if isinstance(v, str):
        try:
            return json.loads(v)
        except json.JSONDecodeError:
            return []
    return v
```

**íŒŒì¼**:
- `Release/backend/schemas.py` (lines 1-3, 70-78)
- `Release/backend/main.py` (lines 316-323)

---

### 11. CORS ì •ì±… ìœ„ë°˜
**ìƒíƒœ**: âœ… í•´ê²°ì™„ë£Œ

**ì¦ìƒ**:
```
Access to fetch at 'http://127.0.0.1:8000/api/generate-materials'
from origin 'http://localhost:8000' has been blocked by CORS policy
```

**ì›ì¸**:
1. CORS ë¯¸ë“¤ì›¨ì–´ê°€ static file mount ì´í›„ì— ì¶”ê°€ë¨
2. í—ˆìš© originì— `http://127.0.0.1:8000` ë¯¸í¬í•¨
3. 500 ì—ëŸ¬ ë°œìƒ ì‹œ CORS í—¤ë”ê°€ ì‘ë‹µì— í¬í•¨ë˜ì§€ ì•ŠìŒ

**í•´ê²°**:
- CORS ë¯¸ë“¤ì›¨ì–´ë¥¼ static file mountë³´ë‹¤ ë¨¼ì € ì¶”ê°€
- í—ˆìš© originì— `http://127.0.0.1:8000` ì¶”ê°€

**íŒŒì¼**: `Release/backend/main.py` (lines 35-48)

---

### 12. Frontend ë°ì´í„° í˜•ì‹ ë¶ˆì¼ì¹˜ (key_topics, quiz_items)
**ìƒíƒœ**: âœ… í•´ê²°ì™„ë£Œ

**ì¦ìƒ 1 - key_topics ê°ì²´ ë Œë”ë§**:
```
Uncaught Error: Minified React error #31
Objects are not valid as a React child (found: object with keys {id, topic, material_id})
```

**ì›ì¸ 1**:
- Backendê°€ `key_topics`ë¥¼ `List[KeyTopic]` ê°ì²´ ë°°ì—´ë¡œ ë°˜í™˜
- FrontendëŠ” `List[str]` ë¬¸ìì—´ ë°°ì—´ì„ ê¸°ëŒ€

**í•´ê²° 1**:
- `LearningMaterial` ìŠ¤í‚¤ë§ˆì— `field_serializer` ì¶”ê°€
- JSON ì§ë ¬í™” ì‹œ KeyTopic ê°ì²´ë¥¼ ë¬¸ìì—´ë¡œ ë³€í™˜

```python
@field_serializer('key_topics')
def serialize_key_topics(self, key_topics: List[KeyTopic], _info):
    return [topic.topic for topic in key_topics]
```

**ì¦ìƒ 2 - quiz undefined ì—ëŸ¬**:
```
Uncaught TypeError: Cannot read properties of undefined (reading 'map')
at InteractiveQuiz.tsx:41:13
```

**ì›ì¸ 2**:
- Backendê°€ `quiz_items` í•„ë“œë¡œ ë°˜í™˜
- FrontendëŠ” `quiz` í•„ë“œë¥¼ ê¸°ëŒ€

**í•´ê²° 2**:
- `model_serializer` ì¶”ê°€í•˜ì—¬ í•„ë“œëª… ë³€ê²½

```python
@model_serializer(mode='wrap')
def serialize_model(self, serializer):
    data = serializer(self)
    if 'quiz_items' in data:
        data['quiz'] = data.pop('quiz_items')
    return data
```

**íŒŒì¼**: `Release/backend/schemas.py` (lines 1, 106-116)

**í…ŒìŠ¤íŠ¸ ê²°ê³¼**: âœ… í…ìŠ¤íŠ¸ ì…ë ¥ ê¸°ëŠ¥ ì •ìƒ ì‘ë™ í™•ì¸

---

## ìˆ˜ì •ëœ ì£¼ìš” íŒŒì¼ ëª©ë¡

1. **Release/backend/main.py**
   - CORS ë¯¸ë“¤ì›¨ì–´ ìˆœì„œ ë³€ê²½ ë° origin ì¶”ê°€
   - Static files ë§ˆìš´íŠ¸ ê²½ë¡œ ìˆ˜ì •
   - Legacy API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
   - Quiz options íŒŒì‹± ë¡œì§ ì¶”ê°€
   - Gemini ëª¨ë¸ëª… ë³€ê²½

2. **Release/backend/schemas.py**
   - field_validator, field_serializer, model_serializer import ì¶”ê°€
   - QuizItem.options validator ì¶”ê°€
   - LearningMaterial.key_topics serializer ì¶”ê°€
   - LearningMaterial.quiz_items â†’ quiz í•„ë“œëª… ë³€ê²½ serializer ì¶”ê°€

3. **Release/backend/auth.py**
   - load_dotenv() ì¡°ê¸° í˜¸ì¶œ ì¶”ê°€

4. **Release/backend/__init__.py**
   - íŒ¨í‚¤ì§€ ì¸ì‹ì„ ìœ„í•œ íŒŒì¼ ìƒì„±

5. **Release/backend/requirements.txt**
   - lxml_html_clean íŒ¨í‚¤ì§€ ì¶”ê°€

6. **Release/setup.bat**
   - UTF-8 ì¸ì½”ë”© ì„¤ì • ì¶”ê°€
   - ë©”ì‹œì§€ ì˜ì–´ ë³€ê²½

7. **Release/MicroLearn.bat**
   - UTF-8 ì¸ì½”ë”© ì„¤ì • ì¶”ê°€
   - ë©”ì‹œì§€ ì˜ì–´ ë³€ê²½

---

## í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½

### âœ… ì •ìƒ ì‘ë™ í™•ì¸
- ì„œë²„ ì‹œì‘/ì¢…ë£Œ
- ë¡œê·¸ì¸ ì¸ì¦
- Static íŒŒì¼ ì„œë¹™
- ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°
- AI ìë£Œ ìƒì„± ìš”ì²­ (200 OK)
- **í…ìŠ¤íŠ¸ ì…ë ¥ì„ í†µí•œ í•™ìŠµìë£Œ ìƒì„±** (ì™„ì „ ì„±ê³µ!)
  - ìš”ì•½ ìƒì„±
  - í•µì‹¬ ì£¼ì œ ì¶”ì¶œ
  - í€´ì¦ˆ ìƒì„±
  - í”Œë˜ì‹œì¹´ë“œ ìƒì„±
  - ë§ˆì¸ë“œë§µ ìƒì„±

### ğŸ”„ í…ŒìŠ¤íŠ¸ ì§„í–‰ì¤‘
- íŒŒì¼ ì—…ë¡œë“œë¥¼ í†µí•œ ìë£Œ ìƒì„± (ë‹¤ìŒ í…ŒìŠ¤íŠ¸)

### â³ ë¯¸í…ŒìŠ¤íŠ¸
- URL ì…ë ¥ì„ í†µí•œ ìë£Œ ìƒì„±
- YouTube ë§í¬ë¥¼ í†µí•œ ìë£Œ ìƒì„±

---

## ê¸°ìˆ  ìŠ¤íƒ í™•ì¸

### Frontend
- React 19.1.1
- TypeScript 4.9.5
- Zustand 5.0.8 (ìƒíƒœ ê´€ë¦¬)
- React Router DOM 7.9.3
- Mermaid 11.12.0 (ë§ˆì¸ë“œë§µ ì‹œê°í™”)

### Backend
- FastAPI 0.118.0
- Uvicorn 0.37.0
- SQLAlchemy 2.0.43
- Python-JOSE 3.5.0 (JWT ì¸ì¦)
- Passlib 4.1.0 (ì•”í˜¸í™”)

### AI/ML
- Google Generative AI (Gemini 2.5-flash)
- LangChain with Google GenAI
- ChromaDB (ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤)
- Tiktoken (í† í° ê³„ì‚°)

### ë¬¸ì„œ ì²˜ë¦¬
- PyPDF
- Python-DOCX
- Trafilatura (ì›¹ ìŠ¤í¬ë˜í•‘)
- YouTube-Transcript-API

---

## ë‹¤ìŒ ì‘ì—… ì‚¬í•­

1. âœ… key_topics ì§ë ¬í™” ë¬¸ì œ í•´ê²° í…ŒìŠ¤íŠ¸
2. â³ URL/YouTube/íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
3. â³ ì „ì²´ ê¸°ëŠ¥ í†µí•© í…ŒìŠ¤íŠ¸
4. â³ ì‹œì—°ìš© ë°ëª¨ ì˜ìƒ ë…¹í™”

---

**ì‘ì„±ì**: Claude Code
**ìµœì¢… ìˆ˜ì •**: 2025-12-01
